<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KKN Desa Keramat</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:Poppins,sans-serif}
body{background:#0f061a;color:white;overflow-y:auto;min-height:100vh;}

/* BACKGROUND */
#bg{position:fixed;inset:0;background-size:cover;background-position:center;filter:blur(2px);transition:1.2s;z-index:-3}
#overlay{position:fixed;inset:0;background:linear-gradient(rgba(20,10,40,.45),rgba(10,5,20,.7));z-index:-2}

/* WEATHER */
#weather{position:fixed;inset:0;pointer-events:none;z-index:-1}
.drop{position:absolute;top:-20px;width:2px;height:18px;background:rgba(200,200,255,.6);animation:rain linear infinite}
@keyframes rain{to{transform:translateY(120vh)}}

/* APP */
#app{
  width:95%;
  max-width:900px;
  margin:20px auto;
  padding:20px;
  background:rgba(255,255,255,.08);
  backdrop-filter:blur(10px);
  border-radius:22px;
  box-shadow:0 30px 80px rgba(0,0,0,.6);
  animation:idle 8s ease-in-out infinite;
}
@keyframes idle{50%{transform:scale(1.015)}}
.shake{animation:shake .35s}
@keyframes shake{
  25%{transform:translateX(-6px)}
  50%{transform:translateX(6px)}
  75%{transform:translateX(-4px)}
}

/* SCENE */
.scene{display:flex;flex-direction:column;gap:12px;margin-top:16px;}
.charRow{display:flex;align-items:flex-start;gap:12px;flex-wrap:wrap;}
.charBox{text-align:center;width:60px;flex-shrink:0;}
.char{
  width:60px;height:60px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  font-size:1.8rem;box-shadow:0 8px 20px rgba(0,0,0,.5)
}
.charName{font-size:.65rem;opacity:.75;margin-top:3px;letter-spacing:.5px}

/* Karakter warna */
.bear{background:linear-gradient(145deg,#8b5a2b,#5a3a1a)}
.lion{background:linear-gradient(145deg,#f5a623,#c97a12)}
.panda{background:linear-gradient(145deg,#fff,#ccc);color:#000}
.fox{background:linear-gradient(145deg,#ff7a18,#ff3d00)}
.wolf{background:linear-gradient(145deg,#fff,#ccc);color:#000}
.ghost{background:linear-gradient(145deg,#555,#222)}

.bubble{
  flex:1;background:rgba(0,0,0,.35);
  border-radius:12px;padding:10px 12px;
  line-height:1.5;opacity:0;transform:translateY(4px);
  transition:.4s ease;
  word-break:break-word;
}
.bubble.show{opacity:1;transform:translateY(0)}

/* CONTROLS */
.controls{display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;margin-top:14px;gap:8px}
button,label{
  padding:6px 14px;border:none;border-radius:999px;
  background:#7b5cff;color:white;font-weight:bold;cursor:pointer;font-size:.85rem
}

/* JUMPSCARE */
#flash{
  position:fixed;inset:0;background:white;opacity:0;pointer-events:none;z-index:999;
}
.flash{animation:flash .25s}
@keyframes flash{50%{opacity:1}}

/* GRAYSCALE */
.grayscale{filter:grayscale(100%)}

/* Responsif HP */
@media(max-width:600px){
  .charBox{width:50px;}
  .char{width:50px;height:50px;font-size:1.5rem;}
  .bubble{font-size:.85rem;padding:8px 10px;}
  .controls{flex-direction:column;gap:6px;}
}
</style>
</head>

<body>

<div id="bg"></div>
<div id="overlay"></div>
<div id="weather"></div>
<div id="flash"></div>

<div id="app">
  <h2 style="text-align:center">üåë KKN Desa Keramat üåë</h2>

  <div class="scene">

    <!-- IKY -->
    <div class="charRow">
      <div class="charBox">
        <div class="char bear" id="ikyChar">üêª</div>
        <div class="charName">IKY</div>
      </div>
      <div class="bubble" id="ikyBubble"></div>
    </div>

    <!-- ANDI -->
    <div class="charRow">
      <div class="charBox">
        <div class="char lion" id="andiChar">ü¶Å</div>
        <div class="charName">ANDI</div>
      </div>
      <div class="bubble" id="andiBubble"></div>
    </div>

    <!-- HANY -->
    <div class="charRow">
      <div class="charBox">
        <div class="char panda" id="hanyChar">üêº</div>
        <div class="charName">HANY</div>
      </div>
      <div class="bubble" id="hanyBubble"></div>
    </div>

    <!-- OGIF -->
    <div class="charRow">
      <div class="charBox">
        <div class="char fox" id="ogifChar">ü¶ä</div>
        <div class="charName">OGIF</div>
      </div>
      <div class="bubble" id="ogifBubble"></div>
    </div>

    <!-- TETUA -->
    <div class="charRow">
      <div class="charBox">
        <div class="char wolf" id="tetuaChar">üê∫</div>
        <div class="charName">TETUA</div>
      </div>
      <div class="bubble" id="tetuaBubble"></div>
    </div>

    <!-- SUANGGI -->
    <div class="charRow">
      <div class="charBox">
        <div class="char ghost" id="suanggiChar">üëª</div>
        <div class="charName">SUANGGI</div>
      </div>
      <div class="bubble" id="suanggiBubble"></div>
    </div>

    <!-- NARRATOR -->
    <div class="charRow">
      <div class="charBox">
        <div class="char" id="narratorChar">üìù</div>
        <div class="charName">NARRATOR</div>
      </div>
      <div class="bubble" id="narratorBubble"></div>
    </div>

  </div>

  <div class="controls">
    <button onclick="prevPart()">‚üµ</button>

    <label>
      üéµ Pilih Musik
      <input type="file" accept="audio/*" hidden onchange="loadMusic(this)">
    </label>

    <button onclick="nextPart()">‚ü∂</button>
  </div>
</div>

<audio id="bgm" loop></audio>

<script>
const bgm=document.getElementById("bgm");
const savedMusic=localStorage.getItem("bgmSrc");
if(savedMusic){bgm.src=savedMusic}

function loadMusic(input){
  const file=input.files[0];
  if(!file) return;
  const url=URL.createObjectURL(file);
  bgm.src=url;
  bgm.play();
  localStorage.setItem("bgmSrc",url);
}

const parts=[
/* =========================
PART 61 ‚Äî SUANGGI MUNCUL LAGI
========================= */
{
bg:"https://i.pinimg.com/originals/eb/24/69/eb24690d9174e441a68534a3cbc4e477.gif",
lines:[
{char:"suanggi",text:"AAAA‚Ä¶ kalian pikir bisa bebas begitu saja?"},
{char:"andi",text:"Cepat, posisi kalian jangan berpisah!"},
{char:"ogif",text:"Hujan tambah deras‚Ä¶ aku nggak suka ini sama sekali."},
{char:"hany",text:"Aku‚Ä¶ aku takut‚Ä¶ tapi aku harus ingat Iky."}
]
},

/* =========================
PART 62 ‚Äî IKY MUNCUL DALAM KENANGAN
========================= */
{
bg:"https://i.pinimg.com/originals/eb/24/69/eb24690d9174e441a68534a3cbc4e477.gif",
lines:[
{char:"narrator",text:"Iky muncul di antara rintik hujan‚Ä¶ bayangan yang menenangkan Hany."},
{char:"hany",text:"Iky‚Ä¶ aku bisa merasakanmu‚Ä¶"},
{char:"andi",text:"Hany, jangan terlalu larut‚Ä¶ kita masih harus fokus."},
{char:"ogif",text:"Andi‚Ä¶ dia muncul‚Ä¶ tapi kenapa rasanya aneh?"}
]
},

/* =========================
PART 63 ‚Äî PETIR DAN TEKANAN
========================= */
{
bg:"https://i.pinimg.com/originals/eb/24/69/eb24690d9174e441a68534a3cbc4e477.gif",
lines:[
{char:"tetua",text:"Petir bukan hanya alam‚Ä¶ ini pertanda roh Suanggi murka!"},
{char:"andi",text:"Cepat! Tekan ukiran batu bersama-sama!"},
{char:"ogif",text:"Kita harus sinkron‚Ä¶ jangan sampai salah."},
{char:"hany",text:"Aku‚Ä¶ aku ingin selamat‚Ä¶ demi Iky‚Ä¶"}
]
},

/* =========================
PART 64 ‚Äî KERJA SAMA
========================= */
{
bg:"https://i.pinimg.com/originals/eb/24/69/eb24690d9174e441a68534a3cbc4e477.gif",
lines:[
{char:"andi",text:"Gif, ikut tekan ukirannya! Jangan ragu!"},
{char:"ogif",text:"Oke‚Ä¶ aku ikut‚Ä¶"},
{char:"hany",text:"Aku‚Ä¶ ikut juga‚Ä¶ Iky, kau lihat aku kan?"},
{char:"narrator",text:"Ketiganya menekan ukiran batu secara bersamaan, air hujan memercik di sekeliling."}
]
},

/* =========================
PART 65 ‚Äî SUB-PLOT ANDI‚ÄìOGIF
========================= */
{
bg:"https://i.pinimg.com/originals/eb/24/69/eb24690d9174e441a68534a3cbc4e477.gif",
lines:[
{char:"andi",text:"Gif‚Ä¶ aku nggak akan biarin apa pun nyerangmu‚Ä¶ percaya sama aku."},
{char:"ogif",text:"Andi‚Ä¶ aku‚Ä¶ terima kasih‚Ä¶ tapi jangan terlalu protektif ya."},
{char:"narrator",text:"Ketegangan romantis antara Andi dan Ogif mulai muncul di tengah teror."}
]
},

/* =========================
PART 66 ‚Äî LORE MISTERIUS
========================= */
{
bg:"https://i.pinimg.com/originals/eb/24/69/eb24690d9174e441a68534a3cbc4e477.gif",
lines:[
{char:"tetua",text:"Noken Merah bukan sekadar roh‚Ä¶ dia menjaga rahasia desa dan orang-orangnya."},
{char:"narrator",text:"Angin menderu, membawa bisikan dari hutan gelap‚Ä¶ menambah ketegangan."},
{char:"andi",text:"Jika salah langkah, kita bisa kehilangan nyawa‚Ä¶"}
]
},

/* =========================
PART 67 ‚Äî TEKANAN SUANGGI
========================= */
{
bg:"https://i.pinimg.com/originals/eb/24/69/eb24690d9174e441a68534a3cbc4e477.gif",
lines:[
{char:"suanggi",text:"AAAA‚Ä¶ aku lapar‚Ä¶ aku haus darah!"},
{char:"hany",text:"Aku‚Ä¶ aku nggak mau kehilanganmu‚Ä¶"},
{char:"ogif",text:"Andi‚Ä¶ jangan biarin dia dekat Hany!"},
{char:"andi",text:"Aku jaga kalian semua‚Ä¶ tetap tenang!"}
]
},

/* =========================
PART 68 ‚Äî GRAYSCALE EMOSI
========================= */
{
bg:"https://i.pinimg.com/originals/eb/24/69/eb24690d9174e441a68534a3cbc4e477.gif",
lines:[
{char:"narrator",text:"Grayscale seketika menyelimuti pemandangan‚Ä¶ menandakan kesedihan dan trauma Hany."},
{char:"hany",text:"Iky‚Ä¶ aku ingin kau di sini‚Ä¶ tapi kau pergi‚Ä¶"},
{char:"ogif",text:"Hany, tetap kuat‚Ä¶ aku di sini."},
{char:"andi",text:"Kita harus selamat‚Ä¶ kita harus selamat‚Ä¶"}
]
},

/* =========================
PART 69 ‚Äî KLIMAKS TRAGEDI
========================= */
{
bg:"https://i.pinimg.com/originals/eb/24/69/eb24690d9174e441a68534a3cbc4e477.gif",
lines:[
{char:"suanggi",text:"AAAA‚Ä¶ kali ini aku takkan dibiarkan!"},
{char:"narrator",text:"Seketika, Iky mengorbankan dirinya, menahan Suanggi agar Hany dan teman-teman selamat."},
{char:"hany",text:"IKY!!! Jangan tinggalkan aku‚Ä¶"},
{char:"ogif",text:"Andi‚Ä¶ cepat bantu Hany, jangan lihat ke belakang!"},
{char:"andi",text:"Aku jaga kalian‚Ä¶ tetaplah bergerak‚Ä¶"}
]
},

/* =========================
PART 70 ‚Äî RELA BERKORBAN
========================= */
{
bg:"https://i.pinimg.com/originals/eb/24/69/eb24690d9174e441a68534a3cbc4e477.gif",
lines:[
{char:"narrator",text:"Iky tersapu oleh kegelapan Suanggi, hujan deras dan petir menambah dramatisnya‚Ä¶"},
{char:"hany",text:"Aku‚Ä¶ aku akan selalu mengingatmu, Iky‚Ä¶"},
{char:"andi",text:"Gif‚Ä¶ kita harus keluar‚Ä¶ jangan biarkan hatimu tenggelam dalam kesedihan."},
{char:"ogif",text:"Kita akan selamat‚Ä¶ Iky‚Ä¶ terima kasih‚Ä¶"}
]
},

/* =========================
PART 71 ‚Äî SELAMAT DARI SUANGGI
========================= */
{
bg:"https://i.pinimg.com/originals/eb/24/69/eb24690d9174e441a68534a3cbc4e477.gif",
lines:[
{char:"narrator",text:"Hujan mulai reda, Suanggi menghilang sementara, meninggalkan jejak gelap di hutan."},
{char:"hany",text:"Aku‚Ä¶ aku masih hidup‚Ä¶ tapi hatiku hancur‚Ä¶"},
{char:"andi",text:"Gif‚Ä¶ ayo kita keluar dari sini‚Ä¶ kita harus tetap bergerak."},
{char:"ogif",text:"Ya‚Ä¶ jangan lihat ke belakang‚Ä¶"}
]
},

/* =========================
PART 72 ‚Äî REFLEKSI
========================= */
{
bg:"https://i.pinimg.com/originals/eb/24/69/eb24690d9174e441a68534a3cbc4e477.gif",
lines:[
{char:"andi",text:"Iky‚Ä¶ kau benar-benar berani‚Ä¶ aku nggak akan melupakanmu."},
{char:"hany",text:"Iky‚Ä¶ aku ingin kau di sini‚Ä¶ tapi aku harus kuat‚Ä¶"},
{char:"ogif",text:"Kita harus selamat‚Ä¶ demi Iky dan demi diri kita sendiri."},
{char:"tetua",text:"Roh Iky kini menjaga kalian, jangan langgar batas desa lagi."}
]
},

/* =========================
PART 73 ‚Äî PETIR TERAKHIR
========================= */
{
bg:"https://i.pinimg.com/originals/eb/24/69/eb24690d9174e441a68534a3cbc4e477.gif",
lines:[
{char:"narrator",text:"Petir terakhir menyambar langit, menandai berakhirnya teror malam itu‚Ä¶"},
{char:"hany",text:"Aku merasa ada yang menatapku‚Ä¶ tapi bukan Suanggi‚Ä¶"},
{char:"andi",text:"Itu Iky‚Ä¶ dia masih di sini‚Ä¶ menjaga kita‚Ä¶"},
{char:"ogif",text:"Kehilangan seseorang itu berat‚Ä¶ tapi kita harus melanjutkan hidup."}
]
},

/* =========================
PART 74 ‚Äî SUB-PLOT ANDI‚ÄìOGIF KONTINUES
========================= */
{
bg:"https://i.pinimg.com/originals/eb/24/69/eb24690d9174e441a68534a3cbc4e477.gif",
lines:[
{char:"andi",text:"Gif‚Ä¶ aku ingin kau tahu‚Ä¶ aku akan selalu ada untukmu."},
{char:"ogif",text:"Andi‚Ä¶ aku‚Ä¶ aku‚Ä¶ terima kasih‚Ä¶ tapi ini terlalu cepat."},
{char:"narrator",text:"Romance mereka tetap samar, namun ketegangan membuat mereka saling peduli."}
]
},

/* =========================
PART 75 ‚Äî EMOSI HANY
========================= */
{
bg:"https://i.pinimg.com/originals/eb/24/69/eb24690d9174e441a68534a3cbc4e477.gif",
lines:[
{char:"hany",text:"Iky‚Ä¶ aku tak pernah menyangka harus kehilanganmu‚Ä¶"},
{char:"narrator",text:"Hany menunduk, air mata bercampur rintik hujan, mengingat pengorbanan Iky."},
{char:"andi",text:"Hany‚Ä¶ jangan terlalu larut‚Ä¶ kita harus keluar dari desa ini."},
{char:"ogif",text:"Tetap kuat‚Ä¶ demi Iky."}
]
},

/* =========================
PART 76 ‚Äî NARASI TETUA
========================= */
{
bg:"https://i.pinimg.com/originals/eb/24/69/eb24690d9174e441a68534a3cbc4e477.gif",
lines:[
{char:"tetua",text:"Desa ini penuh rahasia‚Ä¶ roh menjaga yang hidup, dan menghukum yang lengah."},
{char:"narrator",text:"Kata-kata tetua menambah rasa takut sekaligus hormat bagi para penyintas."},
{char:"andi",text:"Kita harus menghormati tradisi, agar tidak ada lagi korban."}
]
},

/* =========================
PART 77 ‚Äî PEMULIHAN
========================= */
{
bg:"https://i.pinimg.com/originals/eb/24/69/eb24690d9174e441a68534a3cbc4e477.gif",
lines:[
{char:"hany",text:"Hati ini masih sakit‚Ä¶ tapi aku harus terus berjalan‚Ä¶"},
{char:"ogif",text:"Kita selamat‚Ä¶ itu yang terpenting‚Ä¶"},
{char:"andi",text:"Iky‚Ä¶ kami tidak akan lupa‚Ä¶"}
]
},

/* =========================
PART 78 ‚Äî CREDIT ROLL DIMULAI
========================= */
{
bg:"https://i.pinimg.com/originals/eb/24/69/eb24690d9174e441a68534a3cbc4e477.gif",
lines:[
{char:"narrator",text:"üåë Terima kasih telah mengikuti perjalanan KKN Desa Keramat üåë"},
{char:"narrator",text:"Cerita ini diadaptasi dari kisah mistis pedalaman Papua."},
{char:"narrator",text:"Roh Iky akan selalu menjaga Hany, Andi, dan Ogif."}
]
},

/* =========================
PART 79 ‚Äî HINT LORE PAPUA MISTIS
========================= */
{
bg:"https://i.pinimg.com/originals/eb/24/69/eb24690d9174e441a68534a3cbc4e477.gif",
lines:[
{char:"tetua",text:"Noken Merah adalah simbol pengorbanan‚Ä¶ roh yang melindungi dan menuntun para penyintas."},
{char:"narrator",text:"Hutan Papua penuh misteri‚Ä¶ jangan pernah meremehkan kekuatan alam dan roh."}
]
},

/* =========================
PART 80 ‚Äî ENDING TRAGIS
========================= */
{
bg:"https://i.pinimg.com/originals/eb/24/69/eb24690d9174e441a68534a3cbc4e477.gif",
lines:[
{char:"narrator",text:"Akhirnya, hujan reda. Hany, Andi, dan Ogif selamat‚Ä¶ namun Iky tetap abadi dalam kenangan."},
{char:"hany",text:"Aku akan selalu merindukanmu, Iky‚Ä¶"},
{char:"andi",text:"Kita harus lanjutkan hidup‚Ä¶ tapi takkan pernah melupakan pengorbananmu."},
{char:"ogif",text:"Iky‚Ä¶ terima kasih‚Ä¶"}
]
}

]; // nanti isi cerita bisa dilanjutkan

let p=0,l=0;

function rain(on){
  const w=document.getElementById("weather");
  w.innerHTML="";
  if(!on) return;
  for(let i=0;i<60;i++){
    const d=document.createElement("div");
    d.className="drop";
    d.style.left=Math.random()*100+"%";
    d.style.animationDuration=1+Math.random()+"s";
    w.appendChild(d);
  }
}
function jumpscare(){
  document.getElementById("flash").classList.add("flash");
  document.getElementById("app").classList.add("shake");
  setTimeout(()=>{
    document.getElementById("flash").classList.remove("flash");
    document.getElementById("app").classList.remove("shake");
  },400);
}

function type(el,text,cb){
  el.innerHTML="";
  let i=0;
  const t=setInterval(()=>{
    el.innerHTML+=text[i]||"";
    i++;
    if(i>=text.length){clearInterval(t);cb&&cb()}
  },50);
}

function mood(txt){
  return /sunyi|gelap|darah|mati|ketukan|tangis|AAAA/i.test(txt);
}

function showLine(){
  document.querySelectorAll(".bubble").forEach(b=>{b.classList.remove("show");b.innerHTML=""});
  const line=parts[p]?.lines[l];
  if(!line) return;
  const bubble=document.getElementById(line.char+"Bubble");
  if(!bubble) return;
  if(mood(line.text)){
    rain(true);
    jumpscare();
    if(line.char=="suanggi"){ setTimeout(()=>{jumpscare()},300); }
  } else rain(false);

  type(bubble,line.text,()=>{
    setTimeout(()=>{
      l++;
      if(l<parts[p].lines.length) showLine();
    },2500);
  });
  bubble.classList.add("show");
}

function render(){
  l=0;
  if(parts[p]) document.getElementById("bg").style.backgroundImage=`url('${parts[p].bg}')`;
  showLine();
}

function nextPart(){if(p<parts.length-1){p++;render()}}
function prevPart(){if(p>0){p--;render()}}

render();
</script>
</body>
</html>

