<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KKN Desa Keramat</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:Poppins,sans-serif}
body{background:#0f061a;color:white;overflow:hidden}

/* BACKGROUND */
#bg{position:fixed;inset:0;background-size:cover;background-position:center;filter:blur(2px);transition:1.2s;z-index:-3}
#overlay{position:fixed;inset:0;background:linear-gradient(rgba(20,10,40,.45),rgba(10,5,20,.7));z-index:-2}

/* WEATHER */
#weather{position:fixed;inset:0;pointer-events:none;z-index:-1}
.drop{position:absolute;top:-20px;width:2px;height:18px;background:rgba(200,200,255,.6);animation:rain linear infinite}
@keyframes rain{to{transform:translateY(120vh)}}

/* APP */
#app{
  max-width:900px;margin:20px auto;padding:20px;
  background:rgba(255,255,255,.08);
  backdrop-filter:blur(10px);
  border-radius:22px;
  box-shadow:0 30px 80px rgba(0,0,0,.6);
  animation:idle 8s ease-in-out infinite
}
@keyframes idle{50%{transform:scale(1.015)}}
.shake{animation:shake .35s}
@keyframes shake{
  25%{transform:translateX(-6px)}
  50%{transform:translateX(6px)}
  75%{transform:translateX(-4px)}
}

/* SCENE */
.scene{display:flex;flex-direction:column;gap:14px;margin-top:16px}
.charRow{display:flex;align-items:center;gap:14px}
.charBox{text-align:center;width:78px}
.char{
  width:78px;height:78px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  font-size:2.2rem;box-shadow:0 10px 25px rgba(0,0,0,.5)
}
.charName{font-size:.7rem;opacity:.75;margin-top:4px;letter-spacing:.5px}

.bear{background:linear-gradient(145deg,#8b5a2b,#5a3a1a)}
.lion{background:linear-gradient(145deg,#f5a623,#c97a12)}
.panda{background:linear-gradient(145deg,#fff,#ccc);color:#000}
.fox{background:linear-gradient(145deg,#ff7a18,#ff3d00)}

.bubble{
  flex:1;background:rgba(0,0,0,.35);
  border-radius:14px;padding:12px 14px;
  line-height:1.6;opacity:0;transform:translateY(6px);
  transition:.4s ease
}
.bubble.show{opacity:1;transform:translateY(0)}

/* CONTROLS */
.controls{display:flex;justify-content:space-between;align-items:center;margin-top:14px}
button,label{
  padding:8px 16px;border:none;border-radius:999px;
  background:#7b5cff;color:white;font-weight:bold;cursor:pointer
}
label{font-size:.8rem}

/* JUMPSCARE */
#flash{
  position:fixed;inset:0;background:white;opacity:0;pointer-events:none;z-index:999;
}
.flash{animation:flash .25s}
@keyframes flash{50%{opacity:1}}
</style>
</head>

<body>

<div id="bg"></div>
<div id="overlay"></div>
<div id="weather"></div>
<div id="flash"></div>

<div id="app">
  <h2 style="text-align:center">üåë KKN Desa Keramat üåë</h2>

  <div class="scene">
    <div class="charRow">
      <div class="charBox">
        <div class="char bear" id="ikyChar">üêª</div>
        <div class="charName">IKY</div>
      </div>
      <div class="bubble" id="ikyBubble"></div>
    </div>

    <div class="charRow">
      <div class="charBox">
        <div class="char lion" id="andiChar">ü¶Å</div>
        <div class="charName">ANDI</div>
      </div>
      <div class="bubble" id="andiBubble"></div>
    </div>

    <div class="charRow">
      <div class="charBox">
        <div class="char panda" id="hanyChar">üêº</div>
        <div class="charName">HANY</div>
      </div>
      <div class="bubble" id="hanyBubble"></div>
    </div>

    <div class="charRow">
      <div class="charBox">
        <div class="char fox" id="ogifChar">ü¶ä</div>
        <div class="charName">OGIF</div>
      </div>
      <div class="bubble" id="ogifBubble"></div>
    </div>
  </div>

  <div class="controls">
    <button onclick="prevPart()">‚üµ</button>

    <label>
      üéµ Pilih Musik
      <input type="file" accept="audio/*" hidden onchange="loadMusic(this)">
    </label>

    <button onclick="nextPart()">‚ü∂</button>
  </div>
</div>

<audio id="bgm" loop></audio>

<script>
/* ========= MUSIK ========= */
const bgm=document.getElementById("bgm");
const savedMusic=localStorage.getItem("bgmSrc");
if(savedMusic){bgm.src=savedMusic}

function loadMusic(input){
  const file=input.files[0];
  if(!file) return;
  const url=URL.createObjectURL(file);
  bgm.src=url;
  bgm.play();
  localStorage.setItem("bgmSrc",url);
}

/* ========= CERITA ========= */
const parts = [

/* =========================
PART 1 ‚Äî KEDATANGAN DI DESA
========================= */
{
bg:"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh9quqBvzODO9EZGBBamN_m5g7TdB7kCtmoy8nbEF6iCFHlXVdIC_CLCwVaAd0u71drEkud0kfxzh27UCyhXUSfyhi2AlG1XMI9zBuNCvIM0OPo90ihwVOgmksNvuWjW-t2nctiQ-JCsZyFiRpTnQ1_WmmFRC-P09iMsuPvS9yoL8BAkFaTvAKNh-bo47c/s1788/b50d208db24adca2897e8e7d2a0767c3.jpg",
lines:[
{char:"iky",text:"Akhirnya kita sampai di Desa Wamere‚Ä¶ pedalaman Papua. Waktu perjalanan panjang, tapi sekarang fokus kita jelas: KKN harus sukses."},
{char:"hany",text:"Iky‚Ä¶ aku‚Ä¶ aku merasa hawa di sini agak aneh. Sunyi‚Ä¶ terlalu sunyi."},
{char:"andi",text:"Hehe‚Ä¶ desa ini kayak film horor ya. Tapi tenang, aku siap. Dan‚Ä¶ Gif, jangan kabur dulu ya."},
{char:"ogif",text:"Santai saja. Kalau ada yang manggil nama kalian, aku kabur terakhir, janji."},
{char:"iky",text:"Fokus sedikit, kita harus cek lokasi dan warga sekitar. Jangan sampai panik."},
{char:"hany",text:"Aku cuma ingin tetap di dekatmu, Iky‚Ä¶ jangan jauh-jauh."},
{char:"andi",text:"Oke‚Ä¶ oke‚Ä¶ tapi kita jangan kayak anak hilang ya. Gif, sini ikut aku."},
{char:"ogif",text:"Aku mau lihat seberapa seram tempat ini. Kalian terlalu khawatir."}
]
},

/* =========================
PART 2 ‚Äî PERTEMUAN WARGA
========================= */
{
bg:"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh9quqBvzODO9EZGBBamN_m5g7TdB7kCtmoy8nbEF6iCFHlXVdIC_CLCwVaAd0u71drEkud0kfxzh27UCyhXUSfyhi2AlG1XMI9zBuNCvIM0OPo90ihwVOgmksNvuWjW-t2nctiQ-JCsZyFiRpTnQ1_WmmFRC-P09iMsuPvS9yoL8BAkFaTvAKNh-bo47c/s1788/b50d208db24adca2897e8e7d2a0767c3.jpg",
lines:[
{char:"hany",text:"Iky‚Ä¶ kepala desa tadi menatap kita‚Ä¶ rasanya‚Ä¶ menakutkan."},
{char:"iky",text:"Logika dulu, Hany. Warga desa memang pendiam, wajar di tempat pedalaman."},
{char:"andi",text:"Tapi lihat‚Ä¶ ada noken merah di pohon-pohon. Gif, kamu lihat itu?"}, 
{char:"ogif",text:"Ah‚Ä¶ itu cuma dekorasi lokal. Jangan lebay, Andi."},
{char:"hany",text:"Dekorasi? Rasanya seperti‚Ä¶ ada yang mengawasi kita."},
{char:"iky",text:"Santai. Tapi tetap waspada. Malam nanti jangan keluar dari penginapan."},
{char:"andi",text:"Kalau ada suara aneh, aku yang sigap duluan. Gif, siap ya?"}
]
},

/* =========================
PART 3 ‚Äî MALAM PERTAMA
========================= */
{
bg:"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh1mJOyHrkQYPjZmf6ZSdER103COkW_OLW91E511hCOZqey9l5Byca_K4ovclQE58GIT5pnEcjffoN9zawiEdvhrM-ZdytL4I4axymTHQPcVvZ7JHzmENhSYyQcbsd38E0foOBSLy9petzHiO6qZfr50yD3ecqw04mOObhcpTWF5p3Rd8z_9W840UyOufo/s922/2af6e16aeece8c0baacade047bdcf372.jpg",
lines:[
{char:"ogif",text:"Lampu mati. Bagus banget‚Ä¶ suasana horor langsung berasa."},
{char:"hany",text:"Aku nggak suka gelap‚Ä¶ Iky, jangan jauh-jauh."},
{char:"andi",text:"Tenang‚Ä¶ aku siaga. Kalau ada sesuatu, aku tangani duluan."},
{char:"iky",text:"Kita tetap di dalam kamar. Jangan panik."},
{char:"hany",text:"Suara itu‚Ä¶ seperti langkah di luar. Aku takut‚Ä¶"},
{char:"ogif",text:"Kalau itu bukan manusia‚Ä¶ kita siap kan? Jangan panik."},
{char:"andi",text:"Gif, jangan senyum-senyum‚Ä¶ itu malah bikin aku nggak tenang."}
]
},

/* =========================
PART 4 ‚Äî BISIKAN HUTAN
========================= */
{
bg:"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjarhA9mHwI3Pi8MlD1KVRDW8bVYV38o2EUdiMMEJ79F8rqAPZhOOBoAJOmEN5LQWVBzcVQC3Bmcf4v6PI-JMwIOUIC89lR_eZm-nG5YT6YdPTcwvEArUvRPf2KpHMh2OMxD_6jO1uMIJDutvXZ7X1b1tCBv84OywUCIkDvRZHTaSRYi8WyCsREEqGaYSU/s784/a1ece5182f3dfcdf4a9f4e4e84c50071.jp",
lines:[
{char:"andi",text:"Dengar suara tangisan dari hutan‚Ä¶ Gif, kamu ikut aku cek nggak?"},
{char:"ogif",text:"Aku‚Ä¶ iya, aku ikut. Tapi kalian tetap di sini ya."},
{char:"iky",text:"Hany, tetap dekat aku. Jangan lari."},
{char:"hany",text:"Aku takut‚Ä¶ tapi aku nggak mau ninggalin Iky."},
{char:"andi",text:"Ini semakin aneh. Suara itu kayak ada yang‚Ä¶ memperhatikan kita."},
{char:"ogif",text:"Kita harus tetap tenang‚Ä¶ jangan biarkan panik menguasai."}
]
},

/* =========================
PART 5 ‚Äî KONFLIK KECIL
========================= */
{
bg:"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjpXzJQQMBGYh4JsmDZMaCSMkXm5m5dwlCcfFrpc4Ssld8mvU-IUUZw4HaHGpbfbZuNixtGy412-QPD7Z_AOoegtsZa5vnmuXzG5RO6416u8v84gg8Agy3CkU3t7NFpW6ngPOigRKHgCdfhY411YVyjO584Nsit7emPIAnRtTfOTYQFbUhOLP80bPxzMkw/s1104/faeb74fbfc2f8f9dfdb93e108a5a93fd.jp",
lines:[
{char:"andi",text:"Gif‚Ä¶ hati-hati di sana. Jangan main-main sama benda-benda aneh."},
{char:"ogif",text:"Santai. Kalau ada yang nyerang, aku lawan duluan."},
{char:"hany",text:"Aku cuma ingin semuanya aman. Iky‚Ä¶ jangan sampai kamu cedera."},
{char:"iky",text:"Aku protektif, Hany. Tapi kau harus belajar mandiri sedikit."},
{char:"andi",text:"Gif, serius‚Ä¶ kalau kamu kenapa-kenapa, aku nggak mau menyesal."},
{char:"ogif",text:"Andi, jangan lebay. Aku bisa handle sendiri."}
]
},

/* =========================
PART 6 ‚Äî PENEMUAN MISTIS
========================= */
{
bg:"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh9quqBvzODO9EZGBBamN_m5g7TdB7kCtmoy8nbEF6iCFHlXVdIC_CLCwVaAd0u71drEkud0kfxzh27UCyhXUSfyhi2AlG1XMI9zBuNCvIM0OPo90ihwVOgmksNvuWjW-t2nctiQ-JCsZyFiRpTnQ1_WmmFRC-P09iMsuPvS9yoL8BAkFaTvAKNh-bo47c/s1788/b50d208db24adca2897e8e7d2a0767c3.jpg",
lines:[
{char:"iky",text:"Aku menemukan ukiran di pohon‚Ä¶ simbol Noken Merah. Ada nama kita di sini."},
{char:"andi",text:"Nama kita? Sejak kapan? Ini‚Ä¶ agak menyeramkan."},
{char:"hany",text:"Aku merasa‚Ä¶ ada yang ikut masuk ke dalam penginapan. Aku takut."},
{char:"ogif",text:"Ini nggak lucu lagi‚Ä¶ simbol ini kayak peringatan."},
{char:"andi",text:"Gif, jangan main-main‚Ä¶ hati-hati."}
]
},

/* =========================
PART 7 ‚Äî TEROR MULAI
========================= */
{
bg:"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh9quqBvzODO9EZGBBamN_m5g7TdB7kCtmoy8nbEF6iCFHlXVdIC_CLCwVaAd0u71drEkud0kfxzh27UCyhXUSfyhi2AlG1XMI9zBuNCvIM0OPo90ihwVOgmksNvuWjW-t2nctiQ-JCsZyFiRpTnQ1_WmmFRC-P09iMsuPvS9yoL8BAkFaTvAKNh-bo47c/s1788/b50d208db24adca2897e8e7d2a0767c3.jpg",
lines:[
{char:"hany",text:"Aku dengar bisikan‚Ä¶ dari luar. Aku‚Ä¶ takut."},
{char:"iky",text:"Tetap dekat aku. Aku jaga kau, Hany."},
{char:"ogif",text:"Serius‚Ä¶ aku mulai nggak nyaman di sini."},
{char:"andi",text:"Jangan panik. Aku periksa duluan. Gif, tetap di belakang ya."},
{char:"hany",text:"Iky‚Ä¶ jangan tinggalkan aku‚Ä¶"},
{char:"iky",text:"Aku nggak akan. Tapi kau harus tetap tenang."}
]
},

/* =========================
PART 8 ‚Äî JUMPSCARE
========================= */
{
bg:"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh9quqBvzODO9EZGBBamN_m5g7TdB7kCtmoy8nbEF6iCFHlXVdIC_CLCwVaAd0u71drEkud0kfxzh27UCyhXUSfyhi2AlG1XMI9zBuNCvIM0OPo90ihwVOgmksNvuWjW-t2nctiQ-JCsZyFiRpTnQ1_WmmFRC-P09iMsuPvS9yoL8BAkFaTvAKNh-bo47c/s1788/b50d208db24adca2897e8e7d2a0767c3.jpg",
lines:[
{char:"andi",text:"Aku lihat bayangan di atas pohon‚Ä¶ Gif, itu apa?"},
{char:"ogif",text:"AAAA‚Ä¶! Jangan tiba-tiba muncul di sini!"},
{char:"iky",text:"Jangan lari. Tetap di tempatmu, Hany."},
{char:"hany",text:"Iky‚Ä¶ aku takut‚Ä¶"},
{char:"andi",text:"Gif, pegang tanganku! Kita hadapi sama-sama."}
]
},

/* =========================
PART 9 ‚Äî ROMANCE TRAGIS
========================= */
{
bg:"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh9quqBvzODO9EZGBBamN_m5g7TdB7kCtmoy8nbEF6iCFHlXVdIC_CLCwVaAd0u71drEkud0kfxzh27UCyhXUSfyhi2AlG1XMI9zBuNCvIM0OPo90ihwVOgmksNvuWjW-t2nctiQ-JCsZyFiRpTnQ1_WmmFRC-P09iMsuPvS9yoL8BAkFaTvAKNh-bo47c/s1788/b50d208db24adca2897e8e7d2a0767c3.jpg",
lines:[
{char:"iky",text:"Hany‚Ä¶ aku akan melindungimu sampai akhir‚Ä¶ walau aku harus kehilangan nyawa."},
{char:"hany",text:"Iky‚Ä¶ jangan tinggalkan aku‚Ä¶ tolong‚Ä¶"},
{char:"andi",text:"Gif‚Ä¶ aku nggak ngerti kenapa aku takut kehilanganmu."},
{char:"ogif",text:"Andi‚Ä¶ tenang‚Ä¶ tapi aku‚Ä¶ cuma bisa diam."}
]
},

/* =========================
PART 10 ‚Äî TRAGEDI & HINT LORE
========================= */
{
bg:"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh9quqBvzODO9EZGBBamN_m5g7TdB7kCtmoy8nbEF6iCFHlXVdIC_CLCwVaAd0u71drEkud0kfxzh27UCyhXUSfyhi2AlG1XMI9zBuNCvIM0OPo90ihwVOgmksNvuWjW-t2nctiQ-JCsZyFiRpTnQ1_WmmFRC-P09iMsuPvS9yoL8BAkFaTvAKNh-bo47c/s1788/b50d208db24adca2897e8e7d2a0767c3.jpg",
lines:[
{char:"iky",text:"Hany‚Ä¶ lari‚Ä¶ aku hadapi mereka dulu‚Ä¶ selamatkan diri kalian."},
{char:"hany",text:"Iky!!! Jangan pergi‚Ä¶ aku‚Ä¶ aku nggak bisa‚Ä¶"},
{char:"andi",text:"Gif‚Ä¶ kita harus pergi‚Ä¶ sekarang!"},
{char:"ogif",text:"Cepat‚Ä¶ sebelum semuanya terlambat‚Ä¶ Noken Merah itu bukan mainan‚Ä¶"},
{char:"iky",text:"Selamatkan Hany‚Ä¶ itulah tugasku‚Ä¶"}
]
}

];

let p=0,l=0;

/* ========= EFFECT ========= */
function rain(on){
  const w=document.getElementById("weather");
  w.innerHTML="";
  if(!on) return;
  for(let i=0;i<60;i++){
    const d=document.createElement("div");
    d.className="drop";
    d.style.left=Math.random()*100+"%";
    d.style.animationDuration=1+Math.random()+"s";
    w.appendChild(d);
  }
}
function jumpscare(){
  document.getElementById("flash").classList.add("flash");
  document.getElementById("app").classList.add("shake");
  setTimeout(()=>{
    document.getElementById("flash").classList.remove("flash");
    document.getElementById("app").classList.remove("shake");
  },400);
}

/* ========= VN ========= */
function type(el,text,cb){
  el.innerHTML="";
  let i=0;
  const t=setInterval(()=>{
    el.innerHTML+=text[i]||"";
    i++;
    if(i>=text.length){clearInterval(t);cb&&cb()}
  },45);
}

function mood(txt){
  return /sunyi|gelap|darah|mati|ketukan|tangis|AAAA/i.test(txt);
}

function showLine(){
  document.querySelectorAll(".bubble").forEach(b=>{b.classList.remove("show");b.innerHTML=""});
  const line=parts[p].lines[l];
  const bubble=document.getElementById(line.char+"Bubble");
  if(mood(line.text)){rain(true);jumpscare()} else rain(false);

  type(bubble,line.text,()=>{
    setTimeout(()=>{
      l++;
      if(l<parts[p].lines.length) showLine();
    },2500);
  });
  bubble.classList.add("show");
}

function render(){
  l=0;
  document.getElementById("bg").style.backgroundImage=`url('${parts[p].bg}')`;
  showLine();
}

function nextPart(){if(p<parts.length-1){p++;render()}}
function prevPart(){if(p>0){p--;render()}}

render();
</script>

</body>
</html>
